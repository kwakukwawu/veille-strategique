<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D√©tail Offre - Veille Strat√©gique</title>
    <link rel="icon" href="{{ BRAND_LOGO_URL }}">
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <header>
        <div class="header-container">
            <a class="brand" href="/" aria-label="Accueil">
                <img class="brand-logo" src="{{ BRAND_LOGO_URL }}" alt="{{ BRAND_SHORT_NAME }}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
                <span class="brand-logo-fallback" aria-hidden="true">{{ BRAND_SHORT_NAME }}</span>
                <span class="brand-text">
                    <span class="brand-name">{{ BRAND_NAME }}</span>
                </span>
            </a>
            <nav>
                <a href="/">Accueil</a>
                <a href="/offres">Offres</a>
                <a href="/connexion">Connexion</a>
            </nav>
        </div>
    </header>

    <main>
        <div class="container">
            <div id="offre-detail"></div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h4>√Ä propos</h4>
                <div class="footer-brand">VEILLE STRAT√âGIQUE</div>
                <p>{{ BRAND_SHORT_NAME }} - Plateforme intelligente de collecte et monitoring d'appels d'offre.</p>
            </div>
            <div class="footer-section">
                <h4>Liens Utiles</h4>
                <a href="/">Accueil</a>
                <a href="/offres">Offres</a>
                <a href="{{ BRAND_WEBSITE }}" target="_blank" rel="noopener">{{ BRAND_WEBSITE }}</a>
            </div>
            <div class="footer-section">
                <h4>Contact</h4>
                <p>üìß {{ CONTACT_EMAIL }}</p>
                <p>üìû {{ CONTACT_PHONE }}</p>
                <p>üìç {{ CONTACT_ADDRESS }}</p>
            </div>
            <div class="footer-section">
                <h4>Suivez-nous</h4>
                <a href="#">Facebook</a>
                <a href="#">Twitter</a>
                <a href="#">LinkedIn</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2026 {{ BRAND_NAME }}</p>
        </div>
    </footer>

    <script src="/static/js/app.js"></script>
    <script>
        const vs = app;
        const id = (location.pathname || '').split('/').pop();
        const container = document.getElementById('offre-detail');

        async function load(){
            container.innerHTML = '<p>Chargement...</p>';
            try{
                const data = await vs.obtenirOffre(parseInt(id));
                const o = data.offre || data;
                if(!o || !o.titre) return container.innerHTML = '<p>Offre non trouv√©e.</p>';
                container.innerHTML = `
                    <div class="card">
                        <div class="card-header"><h2>${o.titre}</h2></div>
                        <div class="card-body">
                            <p><strong>R√©sum√©:</strong> ${o.description || ''}</p>
                            <p><strong>Lieu d'ex√©cution:</strong> ${vs.detectLieuExecution(o)}</p>
                            <p><strong>Date butoir:</strong> ${vs.formatDate(o.date_cloturation)} ‚Ä¢ <strong>Publication:</strong> ${o.date_publication ? vs.formatDate(o.date_publication) : '-'} ‚Ä¢ <strong>Source:</strong> ${o.source || '-'}</p>
                            <p><strong>Partenaire:</strong> ${o.partenaire || '-'}</p>
                            <p><strong>Mots-cl√©s:</strong> ${o.mots_cles || '-'}</p>
                            <a href="${o.url}" target="_blank" rel="noopener" class="btn btn-primary" style="margin-right:0.5rem;">Ouvrir l'offre</a>
                            <a href="/offres" class="btn">Retour</a>
                        </div>
                    </div>
                `;
            }catch(e){
                container.innerHTML = '<p>Erreur lors du chargement.</p>';
            }
        }

        load();
    </script>
</body>
</html>